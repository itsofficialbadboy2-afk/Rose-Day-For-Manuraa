@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

:root {
    --pink-light: #FFDDEE;
    --pink-main: #FF85B3;
    --pink-dark: #FF4D94;
    --white: #FFFFFF;
}

/* LOCK THE SCREEN */
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden; 
    position: fixed;
    user-select: none; 
    -webkit-user-select: none;
    touch-action: none; 
}

body {
    background-color: var(--pink-light);
    background-image: radial-gradient(var(--pink-main) 1px, transparent 1px);
    background-size: 20px 20px;
    font-family: 'VT323', monospace;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* CONTENT STYLING */
.container { width: 90%; max-width: 360px; text-align: center; z-index: 20; position: relative; box-sizing: border-box;}
.hidden { display: none !important; }

/* ANIMATIONS */
.snap-pulse { display: inline-block; animation: snap 1s steps(1) infinite; }
@keyframes snap { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
@keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }

/* TRANSITION FX */
.transition-flash { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 1000; pointer-events: none; opacity: 0; }
.heart { position: fixed; top: -20px; font-size: 20px; z-index: 5; pointer-events: none; animation: fall linear forwards; }
@keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

/* CARDS */
.letter-card { background: var(--white); border: 4px solid var(--pink-main); padding: 15px; border-radius: 15px; box-shadow: 8px 8px 0 var(--pink-main); }
#stage2:not(.hidden) { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

/* SLIDER */
.slider-wrapper { background: var(--white); height: 50px; border-radius: 25px; border: 3px solid var(--pink-main); position: relative; display: flex; align-items: center; padding: 5px; margin-top: 20px; overflow: hidden; }
#slider-fill { position: absolute; left: 0; top: 0; height: 100%; background: var(--pink-light); z-index: 1; width: 0; }
.slider-knob { position: absolute; left: 5px; width: 40px; height: 40px; background: var(--pink-main); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; cursor: grab; z-index: 10; }
.slider-text { width: 100%; color: var(--pink-main); position: relative; z-index: 5; pointer-events: none; font-size: 18px; }

/* MUSIC PLAYER */
.player-card { background: #fff; border: 3px solid var(--pink-main); border-radius: 12px; padding: 12px; margin-top: 15px; }
.player-top { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
.album-art { width: 50px; height: 50px; border-radius: 8px; border: 2px solid #000; object-fit: cover; }
.song-info { flex-grow: 1; text-align: left; display: flex; flex-direction: column; justify-content: center; height: 50px; }
.song-name { font-size: 18px; color: var(--pink-dark); font-weight: bold; line-height: 1.2; }
.artist-name { font-size: 14px; color: #666; line-height: 1.2; }

.progress-container { width: 100%; height: 10px; background: var(--pink-light); border-radius: 5px; cursor: pointer; margin: 10px 0; position: relative; overflow: hidden; }
.progress-bar { height: 100%; width: 0%; background: var(--pink-main); border-radius: 5px; pointer-events: none; }
.time-info { display: flex; justify-content: space-between; font-size: 13px; color: #777; }

.controls { display: flex; justify-content: center; gap: 8px; margin-top: 8px; }
.btn { padding: 6px 12px; border: none; border-radius: 8px; font-family: inherit; cursor: pointer; font-size: 15px; box-shadow: 0 4px 0 var(--pink-dark); background: var(--pink-light); color: var(--pink-dark); border: 2px solid var(--pink-main); }
.btn:active { transform: translateY(2px); box-shadow: 0 2px 0 var(--pink-dark); }
.play-btn { background: var(--pink-main); color: white; width: 44px; height: 44px; border-radius: 50%; font-size: 18px; border: none; cursor: pointer; }

/* LYRICS PANEL (Allow Scrolling) */
#lyricsPanel { 
    max-height: 0; overflow-y: auto; transition: max-height 0.5s ease-out; 
    background: #fffafa; margin-top: 10px; border-radius: 10px; 
    font-size: 15px; line-height: 1.5; color: #444; text-align: left; 
    touch-action: auto; -webkit-overflow-scrolling: touch;
}
#lyricsPanel.open { max-height: 160px; padding: 12px; border: 2px dashed var(--pink-main); }
#lyricsPanel::-webkit-scrollbar { width: 5px; }
#lyricsPanel::-webkit-scrollbar-thumb { background: var(--pink-main); border-radius: 5px; }